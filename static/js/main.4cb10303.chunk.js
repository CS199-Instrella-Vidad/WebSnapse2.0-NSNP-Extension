(this.webpackJsonpthesis=this.webpackJsonpthesis||[]).push([[0],{174:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},184:function(e,t,n){},195:function(e,t,n){},219:function(e,t){},221:function(e,t){},231:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),r=n(15),i=n.n(r),c=(n(174),n(64)),l=n(17),d=n(12),u=n.n(d),b=n(18),h=n(11),j=n(24),p=n(6),O=n(59),f=(n(176),n(177),n(98)),g=n(279),m=n(280),x=n(132),y=n.n(x),v=n(10),S=[{selector:".snapse-node, .snapse-output, .snapse-input",style:{"font-family":"Computer Modern","background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top",color:"black",content:"data(label)"}},{selector:".snapse-node__closed",style:{"font-family":"Computer Modern","background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top","background-color":"gray",color:"black",content:"data(label)"}},{selector:".snapse-node__rules, .snapse-node__output, .snapse-node__input",style:{"font-family":"Computer Modern","font-style":"italic","background-color":"white","border-width":1,events:"no","text-wrap":"wrap","text-max-width":"100px","text-halign":"center","text-valign":"center",content:"data(label)",height:150,shape:"roundrectangle",width:100}},{selector:".snapse-node__rules__closed",style:{"font-family":"Computer Modern","font-style":"italic","background-color":"gray","border-width":3,events:"no","text-halign":"center","text-valign":"center","text-wrap":"wrap","text-max-width":"100px",content:"data(label)",height:150,shape:"roundrectangle",width:100}},{selector:".snapse-node__time, .snapse-node__spike",style:{"font-family":"Computer Modern","background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:".snapse-node__time__closed, .snapse-node__spike__closed",style:{"font-family":"Computer Modern","background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:"edge",style:{"font-family":"Computer Modern","curve-style":"bezier","target-arrow-shape":"triangle","text-background-color":"white","text-background-shape":"rectangle",width:1}},{selector:".edge--triggering",style:(a={"line-color":"magenta","line-style":"dashed","target-arrow-color":"magenta"},Object(v.a)(a,"line-color","magenta"),Object(v.a)(a,"line-style","dashed"),Object(v.a)(a,"target-arrow-color","magenta"),Object(v.a)(a,"width",4),Object(v.a)(a,"line-dash-offset",3),Object(v.a)(a,"line-dash-pattern",[15,3]),Object(v.a)(a,"arrow-scale",1.5),a)},{selector:"edge[label]",css:{label:"data(label)","text-rotation":"autorotate","text-margin-x":"0px","text-margin-y":"0px","text-background-opacity":1,"font-weight":"bold","font-size":18}}],w=n(152),N=n(72),k=n.n(N);var C=function(){var e=Object(o.useRef)(null);return Object(o.useEffect)((function(){var t,n=e.current,a=0;return function e(){a++,n&&n.edges().animate({style:{"line-dash-offset":-a}}),t=requestAnimationFrame(e)}(),function(){t&&cancelAnimationFrame(t)}}),[]),[e,function(t){e.current=t}]},E=function(e,t,n,a,o,s){return[{data:{id:e,label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},position:{x:t,y:n},classes:"snapse-node"},{data:{id:e+"-rules",parent:e,label:a.replace(/ /g,"\n").replace(/->/g,"\u2192")},position:{x:t,y:n},classes:"snapse-node__rules"},{data:{id:e+"-spike",parent:e,label:o},position:{x:t,y:n-60},classes:"snapse-node__spike"},{data:{id:e+"-time",parent:e,label:"".concat(s<0?"!":s)},position:{x:t,y:n+90},classes:"snapse-node__time"}]},I=function(e,t,n,a,o){return[{data:{rootId:e,id:"".concat(e),label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},classes:"snapse-output",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-output"),parent:e,label:"".concat("string"===typeof a?a.replace(/\[object Object\]/g,"").replaceAll(/(.{12})/g,"$&\n"):"")},classes:"snapse-node__output",position:{x:t,y:n}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:""},classes:"snapse-node__spike",position:{x:t,y:n+40}}]},D=function(e,t,n,a,o){return[{data:{id:e,label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},position:{x:t,y:n},classes:"snapse-input"},{data:{rootId:e,id:"".concat(e,"-input"),parent:e,label:"".concat("string"===typeof a?a.replace(/\[object Object\]/g,"").replaceAll(/(.{12})/g,"$&\n"):"")},classes:"snapse-node__input",position:{x:t,y:n}}]},R=function(e){var t=/([0-9]*)a\(*([0-9]*)(a*)\)*(\+?|\*?)\/([0-9]*)a->([0-9]*)a;([0-9]+)/.exec(e)||/([0-9]*)a\(*([0-9]*)(a*)\)*(\+?|\*?)\/([0-9]*)a->(0);(0)/.exec(e);return console.log("RESSSS",t),t},T=function(e,t,n,a){return{data:{id:e+"->"+t,source:e,target:t,label:n,title:"synapse weight"},classes:a}},M=function(e){for(var t=e.split(" "),n=0,a=0;a<t.length;a++)null!=R(t[a])?n+=1:console.log("invalidRule",t[a]);return n==t.length?1:0},B=n(51);function A(e,t){/(a+)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e);var n=/([0-9]*)a\(*([0-9]*)(a*)\)*(\+?|\*?)\/([0-9]*)a->([0-9]*)a;([0-9]+)/.exec(e),a=/([0-9]*)a\(*([0-9]*)(a*)\)*(\+?|\*?)\/([0-9]*)a->(0);(0)/.exec(e);if(n){console.log("Test Res");var o=Object(p.a)(n,8),s=o[1],r=o[2],i=o[3],c=o[4],l=o[5],d=o[6],u=o[7],b=parseInt(u,10);return""==s&&(s=1),""!=i&&""==r&&(r=1),""==l&&(l=1),""==d&&(d=1),console.log({id:t,requires:s,char:i,grouped:r,symbol:c,consumes:l,produces:d,delay:parseInt(u)}),[parseInt(s),parseInt(r),c,parseInt(l),parseInt(d),b]}if(a){var h=Object(p.a)(a,8);s=h[1],r=h[2],i=h[3],c=h[4],l=h[5],d=h[6],u=h[7];return""==s&&(s=1),""!=i&&""==r&&(r=1),""==l&&(l=1),""==d&&(d=1),console.log({id:t,requires:s,grouped:r,symbol:c,consumes:l,produces:d,delay:parseInt(u)}),[parseInt(s),parseInt(r),c,parseInt(l),0,0]}return!1}function _(e,t,n,a,o){if(o>a)return!1;if("+"==n){if(t>0)return(a-e)%t==0&&a-e>=t;if(a>=e)return!0}else if("*"==n){if(t>0)return(a-e)%t==0;if(a>=e-1)return!0}else if(a==e)return!0;return!1}function P(e,t,n,a,o){var s=Object(B.a)(e,(function(e){var s={},r=[],i=[],c={},l=!0;for(var d in e){if(!(D=e[d]).currentRule&&!D.isOutput&&!D.isInput){delete e[D.id].chosenRule,delete e[D.id].currentRule;for(var u=D.rules.split(" "),b=[],j=0;j<u.length;j++){var f=A(u[j],d),g=Object(p.a)(f,6),m=g[0],x=g[1],y=g[2],v=g[3],S=g[4],w=g[5];_(m,x,y,D.spikes,v)&&(console.log("should end1",l),b.push(u[j]),l=!1)}if(console.log("should end2",l),1==b.length){e[D.id].currentRule=b[0],e[D.id].chosenRule=b[0];var N=A(b[0],d),k=Object(p.a)(N,6);m=k[0],x=k[1],y=k[2],v=k[3],S=k[4],w=k[5];e[D.id].delay=w}else if(1==n&&b.length>1){var C=Math.floor(Math.random()*b.length),E=A(b[C],d),I=Object(p.a)(E,6);m=I[0],x=I[1],y=I[2],v=I[3],S=I[4],w=I[5];e[D.id].currentRule=b[C],e[D.id].chosenRule=b[C],e[D.id].delay=w}else 0==n&&b.length>1&&(c[D.id]=b)}}if(Object.keys(c).length>0)return console.log("Neuron valid rules",c),window.localStorage.setItem("shouldTimeStep","0"),void a(c);for(var d in e){var D=e[d],R=Object(h.a)({},D.outWeights);if(D.currentRule){if(l=!1,D.delay>=0){var T=D.delay.valueOf();T--,e[D.id].delay=T}if(D.delay<0){var M=A(D.currentRule,d),B=Object(p.a)(M,6),P=(m=B[0],x=B[1],y=B[2],v=B[3],S=B[4],w=B[5],D.spikes.valueOf());if(P-=v,e[D.id].spikes=P,D.out){var H,L=D.out,W=Object(O.a)(L);try{for(W.s();!(H=W.n()).done;){var J=H.value;s[J]=J in s?s[J]+S*R[J]:S*R[J],console.log("Sent spikes to "+J+": "+s[J])}}catch(ee){W.e(ee)}finally{W.f()}}delete e[D.id].currentRule}}else if(D.isInput){i.push(D.id),console.log("BS",D.bitstring);var G=D.bitstring.split(","),F=G.length;if(console.log("SPIKE ARR",G),D.bitstring.length<1&&(F=0),D.out){var Y,q=D.out,z=Object(O.a)(q);try{for(z.s();!(Y=z.n()).done;){var U,V=Y.value,K=parseInt(G[t]);if(console.log("TIME",t),console.log("LEN",F),console.log("Bit",K),t<F){console.log("TIME OK"),l=!1;var X=D.delay.valueOf();X--,e[D.id].delay=X,U=K*R[V]}else console.log("TIME EXCEED"),U=0,e[D.id].delay=0;s[V]=V in s?s[V]+parseInt(U):parseInt(U),console.log("Sent spikes from IN",D.id,V,U)}}catch(ee){z.e(ee)}finally{z.f()}}}else D.isOutput?(r.push(D.id),d in s||(s[d]=0)):-1!=D.delay||D.isInput||(e[D.id].delay=0)}for(var $ in s){var Z,Q=parseInt(e[$].spikes.valueOf());if(Q+=s[$],e[$].spikes=Q,console.log("bitstring",e[$].bitstring),e[$].isOutput)Z=0==t?"".concat(s[$]||0):"".concat(e[$].bitstring,",").concat(s[$]||0),e[$].bitstring=Z}console.log("should end",l),l&&o(),window.localStorage.setItem("shouldTimeStep","1")}));return localStorage.setItem(t+"sec",JSON.stringify(s)),s}function H(e){return console.log("back step automata"),JSON.parse(localStorage.getItem(e+"sec"))}var L,W,J,G=n(258),F=n(259),Y=n(260),q=n(261),z=(n(184),n(1)),U=function(e){var t=e.neurons,n=e.onEdgeCreate,a=e.handleShowDeleteAll,s=e.handleChangePosition,r=e.setIsClickedSynapse,i=e.headless,c=e.setNeurons,l=e.splitRules,d=e.checkIsHover,u=e.handleShowEditSynapseModal,b=e.handleShowDeleteSynapseModal,j=e.time,f=!1,g=C(),m=Object(p.a)(g,2),x=m[0],v=m[1];var N=function(e){var t,n,a,o,s,r,i={nodes:[],edges:[],edgeIDs:new Set};for(var c in e){var l=e[c];if(l.currentRule){var d=(t=l.id,n=l.position.x,a=l.position.y,o=l.rules,s=l.spikes,r=l.delay,[{data:{id:t,label:"".concat(t.includes("-")?t.substr(0,t.indexOf("-")):t)},position:{x:n,y:a},classes:"snapse-node__closed"},{data:{id:t+"-rules",parent:t,label:o.replace(/ /g,"\n").replace(/->/g,"\u2192")},position:{x:n,y:a},classes:"snapse-node__rules__closed"},{data:{id:t+"-spike",parent:t,label:s},position:{x:n,y:a-60},classes:"snapse-node__spike__closed"},{data:{id:t+"-time",parent:t,label:r},position:{x:n,y:a+90},classes:"snapse-node__time__closed"}]);i.nodes.push(d[0]),i.nodes.push(d[1]),i.nodes.push(d[2]),i.nodes.push(d[3])}else if(l.isOutput||l.isInput)if(l.isInput){var u=D(l.id,l.position.x,l.position.y,l.bitstring);i.nodes.push(u[0]),i.nodes.push(u[1])}else{var b=I(l.id,l.position.x,l.position.y,l.bitstring);i.nodes.push(b[0]),i.nodes.push(b[1]),i.nodes.push(b[2])}else d=E(l.id,l.position.x,l.position.y,l.rules,l.spikes,l.delay),i.nodes.push(d[0]),i.nodes.push(d[1]),i.nodes.push(d[2]),i.nodes.push(d[3]);if(l.out)for(var h=0;h<l.out.length;h++)if(l.delay<0){var j,p=Object(O.a)(l.out);try{for(p.s();!(j=p.n()).done;){j.value;var f=T(l.id,l.out[h],l.outWeights[l.out[h]]," edge--triggering");i.edges.push(f),i.edgeIDs.add(l.id+"->"+l.out[h])}}catch(m){p.e(m)}finally{p.f()}}else{var g=T(l.id,l.out[h],l.outWeights[l.out[h]],"");i.edges.push(g),i.edgeIDs.add(l.id+"->"+l.out[h])}}return i}(t);return Object(o.useEffect)((function(){if(!i){var e=x.current;e&&(e.on("mouseup",".snapse-node, .snapse-output, .snapse-input",(function(e){console.log("change position",e.target.id()),s(e.position,e.target.id())})),e.on("tap",(function(t){var n=t.target,a=".",o=".";if(n==e)console.log("tap on background"),f=!1,console.log("EVT",e),r(f,a,o);else if(n.isNode())r(f=!1,a,o),console.log("Tap on NODE");else if(n.isEdge()){console.log("Tap on EDGE");var s=n.id();console.log("Edge ID:",s);var i=s.split("->");a=i[0],o=i[1],r(f=!0,a,o),console.log("ISCLICK",f,a,o)}})),e.elements().unbind("mouseover"),e.elements().bind("mouseover",(function(e){var t=Boolean(d());console.log("checker",t),e.target.isNode()&&t?(console.log("Hovering here",t),e.target.popperRefObj=e.target.popper({content:function(){var t=document.createElement("div");return t.classList.add("popper-div"),c((function(n){var a,o=n[e.target.id()];if(o.isInput||o.isOutput){a=o.isInput?"Input neuron":"Output neuron";var s="<i>None </i>";o.bitstring.length>1&&(s=o.bitstring),t.innerHTML="<b>Node ID: </b>"+o.id+"<br /><br /><b>Node Type: </b>"+a+"<br /><br /><b>Spike train: </b>"+s+"<br />"}else{a="Regular neuron";var r,i,c=l(o.rules),d=Object(p.a)(c,2),u=d[0],b=d[1];r=0==u.length?"<i> None </i>":u.join("<br> "),i=0==b.length?"<i> None </i>":b.join("<br> "),t.innerHTML="<b>Node ID: </b>"+o.id+"<br /><br /><b>Node Type: </b>"+a+"<br /><br /><b>Current number of spikes: </b>"+o.spikes+"<br /><br /><b>Spiking rule/s: </b> <br>"+r+"<br /><br /><b>Forgetting rule/s: </b> <br>"+i+"<br />"}})),document.body.appendChild(t),t}})):e.target.isEdge()&&t&&(console.log("HOVERING EDGE"),e.target.popperRefObj=e.target.popper({content:function(){var t=document.createElement("div");t.classList.add("popper-div");var n=e.target.id();console.log(n);var a=n.split("->"),o=a[0],s=a[1];return c((function(e){var a=Object(h.a)({},e[o].outWeights),r=parseInt(a[s]);t.innerHTML="<b>Synapse ID: </b>"+n+"<br /><br /><b>Source Node: </b>"+o+"<br /><br /><b>Destination Node: </b>"+s+"<br /><br /><b>Synapse Weight: </b>"+r+"<br />"})),document.body.appendChild(t),t}}))})),e.elements().unbind("mouseout"),e.elements().bind("mouseout",(function(e){var t=Boolean(d());(e.target.isNode()||e.target.isEdge())&&t&&e.target.popper&&(e.target.popperRefObj.state.elements.popper.remove(),e.target.popperRefObj.destroy())})),e.gridGuide({guidelinesStyle:{strokeStyle:"black",horizontalDistColor:"#ff0000",verticalDistColor:"green",initPosAlignmentColor:"#0000ff"}}),e.edgehandles({handleNodes:".snapse-node, .snapse-node__closed, .snapse-input",preview:!1,loopAllowed:function(){return!1},edgeType:function(e,t){return"flat"},complete:n}))}}),[x,i]),i?Object(z.jsx)("div",{id:"cyHeadless"}):Object(z.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(z.jsxs)(w.a,{className:"center-graph-button",variant:"secondary",onClick:function(){var e=x.current;e&&(e.center(),e.fit(),e.zoom({level:.8,position:{x:100,y:100}}))},children:[Object(z.jsx)(G.a,{})," Center Graph"]})," ",Object(z.jsxs)(w.a,{variant:"success",size:"md",id:"edit-syn-btn",className:"node-actions",onClick:u,style:{textAlign:"center",marginRight:"0.3em"},disabled:j>0,children:[Object(z.jsx)(F.a,{})," Edit Synapse"]}),Object(z.jsxs)(w.a,{variant:"warning",size:"md",id:"del-syn-btn",className:"node-actions",onClick:b,style:{textAlign:"center",marginRight:"0.3em"},disabled:j>0,children:[Object(z.jsx)(Y.a,{})," Delete Synapse"]}),Object(z.jsxs)(w.a,{id:"clear-all-btn",style:{float:"right"},variant:"danger",onClick:function(){a()},children:[Object(z.jsx)(q.a,{})," Clear All"]}),Object(z.jsx)(y.a,{cy:v,wheelSensitivity:.3,elements:y.a.normalizeElements(N),style:{width:"100%",height:"100%"},stylesheet:S})]})},V=n(282),K=function(e){var t=e.showElementPopup,n=e.handleCloseElementPopup,a=(e.handleError,e.nodeID),s=e.nodeType,r=e.nodeSRules,i=e.nodeFRules,c=e.nodeSpikes,l=e.nodeBitstring,d=Object(o.useState)(""),u=Object(p.a)(d,2),b=(u[0],u[1],Object(o.useState)(0)),h=Object(p.a)(b,2),j=(h[0],h[1],function(){n()});return"Input"==s?Object(z.jsxs)(V.a,{show:t,onHide:j,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Input Node Details"})}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Spike train:"})," ",l]})]}):"Output"==s?Object(z.jsxs)(V.a,{show:t,onHide:j,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Output Node Details"})}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Spike train:"})," ",l]})]}):Object(z.jsxs)(V.a,{show:t,onHide:j,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Node Details"})}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Node ID:"})," ",a]}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Type:"})," ",s," Neuron"]}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Current number of spikes:"})," ",c]}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Spiking Rules:"})," ",r]}),Object(z.jsxs)(V.a.Body,{children:[Object(z.jsx)("b",{children:"Forgetting Rules:"})," ",i]})]})},X=n(283),$=function(e){var t=e.showChooseRuleModal,n=e.handleCloseChooseRuleModal,a=e.rules,s=e.handleChosenRules,r=Object(f.a)({}),i=Object(p.a)(r,2),c=i[0],l=i[1];function d(e,t){l((function(n){for(var a in n)a==t&&(n[a]=e.target.value)}))}Object(o.useEffect)((function(){l((function(e){for(var t in a)e[t]=a[t][0]}))}),[a]);for(var u=function(e,t){var n=t.map((function(e){return Object(z.jsx)("option",{value:e,children:e},e)}));return Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:e}),Object(z.jsx)(X.a.Control,{as:"select",value:c[e],onChange:function(t){return d(t,e)},children:n})]})},b=Object.keys(a),h=[],j=0;j<b.length;j++)console.log(j),h.push(u(b[j],a[b[j]]));return Object(z.jsxs)(V.a,{show:t,onHide:n,backdrop:"static",keyboard:!1,children:[Object(z.jsx)(V.a.Header,{children:Object(z.jsx)(V.a.Title,{children:"Choose Rule Form"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),s(c)},children:[h,Object(z.jsx)(w.a,{type:"submit",children:"Submit"})]})})]})},Z=n(262),Q=n(284),ee=n(263),te=n(57),ne=n.n(te),ae=function(e){return Object(z.jsx)(Z.a,Object(h.a)(Object(h.a)({id:"button-tooltip",style:{width:"300px"}},e),{},{children:Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Expression"}),": a",Object(z.jsx)("sup",{children:"i"}),"(a",Object(z.jsx)("sup",{children:"j"}),")",Object(z.jsx)("sup",{children:"*"}),", where i and j cannot both be 0.",Object(z.jsx)("br",{}),Object(z.jsx)("b",{children:"Invalid Input"}),":",Object(z.jsx)("br",{}),"a/a->1;1, a^2/a->a;1,",Object(z.jsx)("br",{})," (a)a/a->a;1 ",Object(z.jsx)("br",{}),Object(z.jsx)("b",{children:"Valid Input"}),":",Object(z.jsx)("br",{}),"a/a->a;1, 2a/a->a;1,",Object(z.jsx)("br",{})," (2a)*/a->a;1"]})}))},oe=function(e,t){return t.reset?{id:"",startingSpikes:0,rules:""}:Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},t.name,t.value))},se={id:"",rules:"",startingSpikes:0},re=function(e){var t=e.showNewNodeModal,n=e.handleCloseModal,a=e.handleNewNode,s=e.handleError,r=function(){n()},i=Object(o.useReducer)(oe,se),c=Object(p.a)(i,2),l=c[0],d=c[1],u=Object(o.useState)(!1),b=Object(p.a)(u,2),h=(b[0],b[1]),j=function(e){d({name:e.target.name,value:e.target.value})};return Object(z.jsxs)(V.a,{show:t,onHide:r,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Create New Node"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault();var t="".concat(l.id,"-").concat(ne.a.generate());if(M(l.rules)){console.log("All rules valid"),r(),h(!0),setTimeout((function(){h(!1),d({reset:!0})}),3e3);var n={id:t,position:{x:100,y:100},rules:l.rules,startingSpikes:parseInt(l.startingSpikes),delay:0,spikes:parseInt(l.startingSpikes),isOutput:!1,isInput:!1,out:[],outWeights:{}};a(n)}else console.log("One or more of the rules is invalid"),s("One or more of the rules is invalid"),r()},"data-testid":"new-node-form",children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{htmlFor:"node-name",children:"Node Name"}),Object(z.jsx)(X.a.Control,{required:!0,id:"node-name",name:"id",type:"text",placeholder:"n0",value:l.id,onChange:j})]}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{htmlFor:"node-rules",children:"Node Rules"}),Object(z.jsx)(Q.a,{placement:"right",delay:{show:250,hide:400},overlay:ae,children:Object(z.jsx)(ee.a,{style:{"padding-left":"5px"}})}),Object(z.jsx)(X.a.Control,{id:"node-rules",required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:l.rules,onChange:j}),Object(z.jsx)(X.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{htmlFor:"starting-spikes",children:"Starting Spike Number"}),Object(z.jsx)(X.a.Control,{id:"starting-spikes",required:!0,name:"startingSpikes",type:"number",min:"0",value:l.startingSpikes,onChange:j})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:r,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary","data-testid":"new-node-submit-button",children:"Save Changes"})]})})]})},ie=function(e,t){return t.reset?{id:""}:Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},t.name,t.value))},ce={id:""},le=function(e){var t=e.showAddWeightModal,n=e.handleCloseAddWeightModal,a=e.handleAddWeight,s=(e.handleError,e.srce),r=e.dest,i=function(){a(s,r,1),n()},c=Object(o.useState)(""),l=Object(p.a)(c,2),d=(l[0],l[1],Object(o.useReducer)(ie,ce)),u=Object(p.a)(d,2),b=u[0],h=u[1],j=Object(o.useState)(!1),O=Object(p.a)(j,2),f=(O[0],O[1]);return Object(z.jsxs)(V.a,{show:t,onHide:i,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Add Synapse Weight"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault();var t=parseInt(b.weight);console.log("SOURCE",s),console.log("DEST",r),console.log("weight",t),i(),f(!0),setTimeout((function(){f(!1)}),3e3),a(s,r,t,0)},children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsxs)(X.a.Label,{children:["Weight of the Synapse between ",s," and ",r,":"]}),Object(z.jsx)(X.a.Control,{required:!0,name:"weight",type:"number",placeholder:1,min:1,value:b.weight,onChange:function(e){console.log(e.target.value),console.log(e.target.name),h({name:e.target.name,value:e.target.value})}})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:i,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},de=function(e,t){return t.reset?{id:""}:Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},t.name,t.value))},ue={id:""},be=function(e){var t=e.showNewOutputModal,n=e.handleCloseNewOutputModal,a=e.handleNewOutput,s=(e.handleError,function(){n()}),r=Object(o.useReducer)(de,ue),i=Object(p.a)(r,2),c=i[0],l=i[1],d=Object(o.useState)(!1),u=Object(p.a)(d,2),b=(u[0],u[1]);return Object(z.jsxs)(V.a,{show:t,onHide:s,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Create New Node"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault();var t="".concat(c.id,"-").concat(ne.a.generate());s(),b(!0),setTimeout((function(){b(!1),l({reset:!0})}),3e3),a({id:t,position:{x:300,y:300},isOutput:!0,spikes:0,bitstring:" "})},children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:"Output Node Name"}),Object(z.jsx)(X.a.Control,{required:!0,name:"id",type:"text",placeholder:"n0",value:c.id,onChange:function(e){console.log(e.target.value),console.log(e.target.name),l({name:e.target.name,value:e.target.value})}})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:s,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},he=function(e,t){return t.reset?{id:""}:Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},t.name,t.value))},je={id:""},pe=function(e){var t=e.showNewInputModal,n=e.handleCloseNewInputModal,a=e.handleNewInput,s=(e.handleError,function(){n()}),r=Object(o.useReducer)(he,je),i=Object(p.a)(r,2),c=i[0],l=i[1],d=Object(o.useState)(!1),u=Object(p.a)(d,2),b=(u[0],u[1]),h=function(e){console.log(e.target.value),console.log(e.target.name),l({name:e.target.name,value:e.target.value})};return Object(z.jsxs)(V.a,{show:t,onHide:s,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Create New Node"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault();var t="".concat(c.id,"-").concat(ne.a.generate());s(),b(!0),setTimeout((function(){b(!1),l({reset:!0})}),3e3);var n={id:t,position:{x:300,y:300},isInput:!0,isOutput:!1,spikes:0,delay:0,out:[],bitstring:c.bitstring,outWeights:{}};a(n)},children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:"Input Node Name"}),Object(z.jsx)(X.a.Control,{required:!0,name:"id",type:"text",placeholder:"n0",value:c.id,onChange:h})]}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:" Bitstring/Spike Train"}),Object(z.jsx)(X.a.Control,{required:!0,name:"bitstring",type:"text",placeholder:"1,0,1",value:c.bitstring,onChange:h}),Object(z.jsxs)(X.a.Text,{className:"text-muted",children:["Enter spike train. Separate spikes with ",Object(z.jsx)("b",{children:"commas"})," with"," ",Object(z.jsx)("b",{children:"NO space in between"})," (e. g. ",Object(z.jsx)("b",{children:"1,0,1,1"}),").v"]})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:s,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},Oe=function(e){var t=e.showEditModal,n=e.handleCloseEditModal,a=e.handleEditNode,s=e.handleError,r=e.neurons,i=Object(o.useState)(""),c=Object(p.a)(i,2),l=c[0],d=c[1],u=Object(o.useState)(""),b=Object(p.a)(u,2),h=b[0],j=b[1],O=Object(o.useState)(0),f=Object(p.a)(O,2),g=f[0],m=f[1],x=function(){d(null),j(null),m(null),n()};Object(o.useEffect)((function(){Object.keys(r).reduce((function(e,t){return r[t].isOutput||r[t].isInput||(e[t]=r[t]),e}),{})}),[]);var y=Object.keys(r).reduce((function(e,t){return r[t].isOutput||r[t].isInput||(e[t]=r[t]),e}),{}),v=Object.keys(y).map((function(e){return Object(z.jsx)("option",{value:e,children:e},e)}));return Object(z.jsxs)(V.a,{show:t,onHide:x,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Edit Regular Node"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){console.log(l,h,g),e.preventDefault(),console.log(l,h,g),l&&"-1"!=l?M(h)?(console.log("All rules valid"),x(),a(l,h,g)):(console.log("One or more of the rules is invalid"),s("One or more of the rules is invalid")):s("Please select a node to edit")},"data-testid":"edit-node-form",children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:"Node"}),Object(z.jsxs)(X.a.Control,{required:!0,"data-testid":"select-option",as:"select",defaultValue:-1,onChange:function(e){var t=e.target.value;d(t),j(r[t].rules),m(r[t].startingSpikes)},children:[Object(z.jsx)("option",{disabled:!0,value:-1,children:"Select a node"},-1),v]})]}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{htmlFor:"node-rules",children:"Node Rules"}),Object(z.jsx)(X.a.Control,{id:"node-rules",required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:h,onChange:function(e){j(e.target.value)}}),Object(z.jsx)(X.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{htmlFor:"startingSpikes",children:"Starting Spike Number"}),Object(z.jsx)(X.a.Control,{id:"startingSpikes",required:!0,name:"startingSpikes",type:"number",min:"0",placeholder:"0",value:g,onChange:function(e){return m(e.target.value)}})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:x,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary","data-testid":"edit-node-submit-button",children:"Save Changes"})]})})]})},fe=function(e){var t=e.showEditInputModal,n=e.handleCloseEditInputModal,a=e.handleEditInputNode,s=e.handleError,r=e.neurons,i=Object(o.useState)(""),c=Object(p.a)(i,2),l=c[0],d=c[1],u=Object(o.useState)(""),b=Object(p.a)(u,2),h=b[0],j=b[1],O=function(){j(null),d(null),n()};Object(o.useEffect)((function(){Object.keys(r).reduce((function(e,t){return r[t].isInput&&(e[t]=r[t]),e}),{})}),[]);var f=Object.keys(r).reduce((function(e,t){return r[t].isInput&&(e[t]=r[t]),e}),{}),g=Object.keys(f).map((function(e){return Object(z.jsx)("option",{value:e,children:e},e)}));return Object(z.jsxs)(V.a,{show:t,onHide:O,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Edit Input Node"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),l&&"-1"!=l?(O(),a(l,h)):s("Please select a node to edit!")},"data-testid":"edit-node-form",children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:"Node"}),Object(z.jsxs)(X.a.Control,{required:!0,"data-testid":"select-option",as:"select",defaultValue:-1,onChange:function(e){var t=e.target.value;d(t),j(r[t].bitstring)},children:[Object(z.jsx)("option",{disabled:!0,value:-1,children:"Select an input node"},-1),g]})]}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:"Bitstring/Spike Train"}),Object(z.jsx)(X.a.Control,{id:"spikeTrain",required:!0,name:"spikeTrain",type:"text",placeholder:"1,0,1",value:h,onChange:function(e){j(e.target.value)}}),Object(z.jsxs)(X.a.Text,{className:"text-muted",children:["Enter spike train. Separate spikes with ",Object(z.jsx)("b",{children:"commas"})," with"," ",Object(z.jsx)("b",{children:"NO space in between"})," (e. g. ",Object(z.jsx)("b",{children:"1,0,1,1"}),")."]})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:O,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary","data-testid":"edit-node-submit-button",children:"Save Changes"})]})})]})},ge=function(e){var t,n=e.showEditSynapseModal,a=e.handleCloseEditSynapseModal,o=e.handleEditSynapse,s=e.handleError,r=e.neurons,i=e.isClickedSynapse,c=e.srcID,l=e.dstID,d=e.setWeight,u=e.weight_main,b=e.setNeurons,j=e.handleDeleteSynapse,p=function(){d(i?u:1),a()};function O(e){e.preventDefault(),i?(p(),setTimeout((function(){}),3e3),0==u?b((function(e){var t=Object(h.a)({},e[c].outWeights);t[l]=1,e[c].outWeights=t,j(c,l)})):o(c,l,u)):s("Please click a synapse to edit")}return i&&r[c]?b((function(e){var n=Object(h.a)({},e[c].outWeights);t=parseInt(n[l])})):(d(1),t=1),i?Object(z.jsxs)(V.a,{show:n,onHide:p,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Edit Clicked Synapse"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:O,"data-testid":"edit-node-form",children:[Object(z.jsx)(X.a.Group,{children:Object(z.jsxs)(X.a.Label,{children:["Selected Synapse: ",c,"->",l]})}),Object(z.jsx)(X.a.Group,{children:Object(z.jsxs)(X.a.Label,{children:["Source Node: ",Object(z.jsx)("b",{children:c})]})}),Object(z.jsx)(X.a.Group,{children:Object(z.jsxs)(X.a.Label,{children:["Destination Node: ",Object(z.jsx)("b",{children:l})]})}),Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{htmlFor:"synapse-weight",children:"Synapse Weight"}),Object(z.jsx)(X.a.Control,{id:"synapse-weight",required:!0,name:"weight",type:"number",min:"0",placeholder:t,value:u,onChange:function(e){d(e.target.value)}}),Object(z.jsxs)(X.a.Text,{className:"text-muted",children:["Enter any ",Object(z.jsx)("b",{children:"nonnegative integer"}),"."]})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:p,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"primary","data-testid":"edit-node-submit-button",children:"Save Changes"})]})})]}):Object(z.jsxs)(V.a,{show:n,onHide:p,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Edit Clicked Synapse"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsx)(X.a,{onSubmit:O,"data-testid":"edit-node-form",children:Object(z.jsx)(X.a.Group,{children:Object(z.jsx)(X.a.Label,{children:Object(z.jsx)("b",{children:"NO SELECTED SYNAPSE! Please click a synapse to edit."})})})})})]})},me=function(e){var t=e.showDeleteModal,n=e.handleCloseDeleteModal,a=e.handleDeleteNode,s=(e.handleError,e.neurons),r=Object(o.useState)(""),i=Object(p.a)(r,2),c=i[0],l=i[1],d=function(){n()},u=Object.keys(s).map((function(e){return Object(z.jsx)("option",{value:e,children:e},e)})),b=Object.keys(s)[0];return Object(z.jsxs)(V.a,{show:t,onHide:d,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Delete Node"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),""!==c?(d(),a(c)):(d(),a(b))},children:[Object(z.jsxs)(X.a.Group,{children:[Object(z.jsx)(X.a.Label,{children:"Select node to delete"}),Object(z.jsxs)(X.a.Control,{as:"select",defaultValue:-1,onChange:function(e){l(e.target.value)},children:[Object(z.jsx)("option",{disabled:!0,value:-1,children:"Select a node"},-1),u]})]}),Object(z.jsx)(w.a,{variant:"secondary",onClick:d,children:"Close"})," ",Object(z.jsx)(w.a,{type:"submit",variant:"danger",children:"Delete neuron"})]})})]})},xe=function(e){var t=e.showDeleteAllModal,n=e.handleCloseDeleteAllModal,a=e.handleDeleteAll,s=(e.handleError,Object(o.useState)("")),r=Object(p.a)(s,2),i=(r[0],r[1]),c=function(){n()};return Object(z.jsxs)(V.a,{show:t,onHide:c,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Clear All"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:function(e){e.preventDefault(),c(),setTimeout((function(){i("")}),3e3),a()},children:[Object(z.jsx)(X.a.Group,{children:Object(z.jsx)(X.a.Label,{children:"Are you sure you want to delete all elements?"})}),Object(z.jsx)(w.a,{type:"submit",variant:"danger",children:"YES"}),Object(z.jsx)(w.a,{variant:"secondary",onClick:c,children:"NO"})," "]})})]})},ye=function(e){var t=e.showDeleteSynapseModal,n=e.handleCloseDeleteSynapseModal,a=e.handleDeleteSynapse,o=(e.handleError,e.setNeurons),s=e.isClickedSynapse,r=e.srcID,i=e.dstID,c=function(){n()};function l(e){e.preventDefault(),c(),setTimeout((function(){}),3e3),o((function(e){var t=Object(h.a)({},e[r].outWeights);t[i]=1,e[r].outWeights=t,a(r,i)}))}return s?Object(z.jsxs)(V.a,{show:t,onHide:c,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Delete Synapse"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsxs)(X.a,{onSubmit:l,children:[Object(z.jsx)(X.a.Group,{children:Object(z.jsxs)(X.a.Label,{children:["Are you sure you want to delete this synapse with source"," ",Object(z.jsx)("b",{children:r})," and destination ",Object(z.jsx)("b",{children:i}),"?"]})}),Object(z.jsx)(w.a,{type:"submit",variant:"danger",children:"YES"}),Object(z.jsx)(w.a,{variant:"secondary",onClick:c,children:"NO"})," "]})})]}):Object(z.jsxs)(V.a,{show:t,onHide:c,children:[Object(z.jsx)(V.a.Header,{closeButton:!0,children:Object(z.jsx)(V.a.Title,{children:"Delete Clicked Synapse"})}),Object(z.jsx)(V.a.Body,{children:Object(z.jsx)(X.a,{onSubmit:l,"data-testid":"edit-node-form",children:Object(z.jsx)(X.a.Group,{children:Object(z.jsx)(X.a.Label,{children:Object(z.jsx)("b",{children:"NO SELECTED SYNAPSE! Please click a synapse to delete."})})})})})]})},ve=n(264),Se=(n(195),function(e){return Object(z.jsx)("td",{children:e})}),we=function(e,t){return Object(z.jsx)("tr",{children:e},"time-"+t)},Ne=function(e){var t=e.time,n=e.showChoiceHistoryModal,a=e.handleCloseHoiceHistoryModal,o=JSON.parse(localStorage.getItem(t-1+"sec")),s=Object(z.jsx)("td",{children:"There are no neurons"});o&&(s=Object.keys(o).map((function(e){return Object(z.jsx)("th",{className:"choice-history-header",children:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},e)})));for(var r=[],i=0;i<t;i++){var c=[];c.push(Object(z.jsxs)("td",{className:"time",children:[" ",i," "]}));var l=JSON.parse(localStorage.getItem(i+"sec"));for(var d in l)l[d].chosenRule?c.push(Se(l[d].chosenRule.replace(/->/g,"\u2192"))):l[d].isOutput?c.push(Se("".concat("string"===typeof l[d].bitstring?l[d].bitstring.replace(/\[object Object\]/g,""):""))):c.push(Se("No applicable rule."));r.push(we(c,i)),c=[]}return Object(z.jsx)(V.a,{show:n,onHide:a,className:"custom-choice-history-modal",size:"lg",children:Object(z.jsxs)(ve.a,{className:"choicehistory",striped:!0,bordered:!0,hover:!0,"data-testid":"choice-history-table",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"headtime",children:"Time"}),s]})}),Object(z.jsx)("tbody",{children:r})]})})},ke=function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],s="Are you sure you want to exit without saving your system?";return Object(o.useEffect)((function(){return window.onbeforeunload=n&&function(){return s},function(){window.onbeforeunload=null}}),[n]),[Object(z.jsx)(l.a,{when:n,message:s}),function(){return a(!0)},function(){return a(!1)}]},Ce=n(119),Ee=n(281),Ie=n(265),De=n(153),Re=n(266),Te=n(163),Me=n(267),Be=n(268),Ae=n(269),_e=n(270),Pe=n(271),He=n(272),Le=n(120),We=3;var Je=Object(Le.c)(L||(L=Object(Ce.a)(["\nfrom {\n  transform: scaleX(100%);\n}\n\nto {\n  transform: scaleX(0%);\n}\n"]))),Ge=Le.b.div(W||(W=Object(Ce.a)(["\n  ","\n  background-color: #c44569;\n  height: 4px;\n  transform-origin: left center;\n  margin-bottom: 2px;\n"])),(function(e){return e.isPlaying&&Object(Le.a)(J||(J=Object(Ce.a)(["\n      animation: "," ","s linear;\n    "])),Je,We)}));function Fe(e){return"".concat(e,"x")}var Ye=function(e){var t=Object(o.useState)(1),n=Object(p.a)(t,2),a=n[0],s=n[1],r=function(){var t=Object(b.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0==e.time&&(console.log("NULL_FORWARD"),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(e.neurons)))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=3e3/a;if(We=t/1e3,console.log("Simu speed",t),e.isPlaying)var n=setInterval((function(){e.onIntervalStepRef.current()}),t);return function(){return clearInterval(n)}}),[e.isPlaying,e.onIntervalStepRef]),Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{style:{textAlign:"center"},children:Object(z.jsx)("h1",{style:{fontWeight:"700"},className:"websnapse-title",children:"WebSnapse"})}),Object(z.jsxs)(Ie.a,{children:[Object(z.jsx)(De.a,{children:Object(z.jsxs)("div",{children:[Object(z.jsx)(X.a,{children:Object(z.jsx)(X.a.Group,{id:"formGridCheckbox",children:Object(z.jsxs)(Ie.a,{children:[Object(z.jsx)(De.a,{sm:8,children:Object(z.jsx)("div",{children:Object(z.jsxs)(Re.a,{id:"simu-mode",title:"Simulation Mode: "+e.mode,onSelect:function(t){console.log(t),e.setMode(t)},children:[Object(z.jsx)(Te.a.Item,{eventKey:"GUIDED",onClick:function(){return e.setIsRandom(!1)},children:"GUIDED"}),Object(z.jsx)(Te.a.Item,{eventKey:"PSEUDORANDOM",onClick:function(){return e.setIsRandom(!0)},children:"PSEUDORANDOM"})]})})}),Object(z.jsx)(De.a,{sm:8,style:{textAlign:"left"},children:Object(z.jsx)(Q.a,{placement:"right",delay:{show:250,hide:400},overlay:function(e){return Object(z.jsx)(Z.a,Object(h.a)(Object(h.a)({id:"button-tooltip"},e),{},{children:"Pseudorandom mode will allow the system to decide which rule will be executed. Guided mode will let you be the one to decide."}))},children:Object(z.jsx)(ee.a,{})})})]})})}),0==e.time?Object(z.jsx)("div",{}):Object(z.jsxs)("div",{style:{backgroundColor:"#778beb",color:"white",borderRadius:"10px",padding:"0.5em"},children:[Object(z.jsx)(Me.a,{color:"white",size:30})," ",Object(z.jsx)("strong",{children:"Time:"})," ",0==e.time?"Start playing!":e.time]})]})}),Object(z.jsx)(De.a,{children:Object(z.jsxs)("div",{className:"snapse-controls",style:{textAlign:"center",marginBottom:"0.8em"},children:[Object(z.jsx)(w.a,{variant:"link",onClick:function(){return e.onBackward()},children:Object(z.jsx)(Be.a,{})})," ",Object(z.jsxs)("div",{style:{display:"inline-block"},children:[Object(z.jsx)(Ge,{isPlaying:e.isPlaying},e.pBar),Object(z.jsx)(w.a,{size:"lg",className:"snapse-controls-play",onClick:function(){e.hasEnded?alert("Simulation has ended."):e.setIsPlaying((function(e){return!e}))},children:e.isPlaying?Object(z.jsx)(Ae.a,{}):Object(z.jsx)(_e.a,{})})]})," ",Object(z.jsx)(w.a,{variant:"link",onClick:function(){return e.onForward()},children:Object(z.jsx)(Pe.a,{})})," ",Object(z.jsx)(w.a,{hidden:!0,id:"forwardBtn",variant:"link",onClick:function(){return r()},children:Object(z.jsx)(Pe.a,{})})," "]})}),Object(z.jsx)(De.a,{style:{textAlign:"right"},children:Object(z.jsxs)("div",{id:"speed-slider",style:{backgroundColor:"#786fa6",borderRadius:"10px",padding:"0.5em"},children:[Object(z.jsxs)("h6",{className:"slider-title",style:{textAlign:"center"},children:[Object(z.jsx)(He.a,{})," Simulation Speed",Object(z.jsx)(w.a,{size:"sm",variant:"light",style:{float:"right"},onClick:function(){e.isPlaying&&e.setIsPlaying(!1),s(1)},children:"Reset to 1x"})," "]}),Object(z.jsx)(Ee.a,{"aria-label":"simuSpeed",color:"secondary",min:.1,max:3,step:.1,defaultValue:1,value:a,onChange:function(t,n){e.isPlaying&&e.setIsPlaying(!1),s(n),We=3e3/n/1e3},valueLabelDisplay:"auto",valueLabelFormat:Fe})]})})]})]})},qe=n(273),ze=n(274),Ue=n(275),Ve=n(276);var Ke,Xe=function(e){return Object(z.jsx)("div",{children:Object(z.jsxs)(Ie.a,{children:[Object(z.jsxs)(De.a,{sm:8,children:[Object(z.jsxs)(w.a,{variant:"outline-dark",size:"md",id:"new-node-btn",className:"node-actions text-primary",onClick:e.handleShow,style:{textAlign:"center",marginRight:"0.3em"},disabled:e.time>0,children:[Object(z.jsx)(qe.a,{})," New Node"]}),Object(z.jsxs)(w.a,{variant:"outline-dark",size:"md",id:"new-input-btn",className:"node-actions text-primary",onClick:e.handleShowNewInputModal,style:{textAlign:"center",marginRight:"0.3em"},disabled:e.time>0,children:[Object(z.jsx)(ze.a,{})," New Input Node"]}),Object(z.jsxs)(w.a,{variant:"outline-dark",size:"md",id:"new-output-btn",className:"node-actions text-primary",onClick:e.handleShowNewOutputModal,style:{textAlign:"center",marginRight:"0.3em"},disabled:e.time>0,children:[Object(z.jsx)(Ue.a,{})," New Output Node"]}),Object(z.jsxs)(w.a,{variant:"outline-primary",size:"md",id:"del-node-btn",className:"node-actions text-danger",onClick:e.handleShowDeleteModal,style:{textAlign:"center",marginRight:"0.3em"},disabled:e.time>0,children:[Object(z.jsx)(Y.a,{})," Delete Node"]}),Object(z.jsxs)(w.a,{variant:"outline-primary",size:"md",id:"edit-node-btn",className:"node-actions text-success",onClick:e.handleShowEditModal,style:{textAlign:"center",marginRight:"0.3em"},disabled:e.time>0,children:[Object(z.jsx)(F.a,{})," Edit Regular Node"]}),Object(z.jsxs)(w.a,{variant:"outline-primary",size:"md",id:"edit-inp-node-btn",className:"node-actions text-success",onClick:e.handleShowEditInputModal,style:{textAlign:"center",marginRight:"0.3em"},disabled:e.time>0,children:[Object(z.jsx)(F.a,{})," Edit Input Node"]})]}),Object(z.jsxs)(De.a,{sm:4,style:{textAlign:"right"},children:[Object(z.jsxs)(w.a,{id:"res-btn",variant:"danger",onClick:e.handleReset,style:{textAlign:"center",marginTop:"0.4em"},children:[Object(z.jsx)(Ve.a,{})," Restart Simulation"]})," "]})]})})},$e=n(47),Ze=[{target:".websnapse-title",title:"Welcome to WebSnapse!",content:"This is a visual simulator to aid in the creation and simulation of SN P systems.",placement:"center",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-node-btn",title:"New Node",content:"You can create a new neuron here. You will then be prompted to give it a label name, rules and the number of spikes the neuron should initially contain.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-node-btn",title:"Creating Rules",content:"When writing rules, it should follow the format E/c->p;d, where E follows the regular expression (na)(+***) with n equal to the number of spikes required, c is na with c equal to the number of spikes to be consumed, p is na with c equal to the number of spikes to be produced and d equal to the delay. If creating a forgetting rule, set p to 0. Example: 2a(a)+/2a->0;0",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-input-btn",title:"New Input Node",content:"You can also create input neurons to send spikes to connected neurons in your system. Input neurons have spike trains made up of numbers separated by commas, with each representing the number of spikes the input neuron sends at the given time.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-output-btn",title:"New Output Node",content:"You can also create output neurons to receive the output of your system in the form of a spike train (string) composed of numbers separated by commas, with each representing the number of spikes the output neuron receives at the given time.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#del-node-btn",title:"Delete Node",content:"You can delete a neuron by choosing the neuron ID of the neuron you would like to delete. The neurons are ordered from oldest to last added. Deleting a neuron will also delete the synapses connected to the neuron. You can choose to cancel or save the changes you made, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#edit-node-btn",title:"Edit Regular Node",content:"You can edit a neuron by choosing the neuron ID of the neuron you would like to edit. The neurons are ordered from oldest to last added. You can edit the rules and spikes of the neuron. You can choose to cancel or save the changes you made, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#edit-inp-node-btn",title:"Edit Input Node",content:"You can edit an input neuron by choosing the neuron ID of the neuron you would like to edit. The neurons are ordered from oldest to last added. You can edit the spike train/bitstring of the neuron. You can choose to cancel or save the changes you made, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#edit-syn-btn",title:"Edit Synapse",content:"You can edit a synapse by first clicking the synapse you want to edit. You can edit the weight of the selected synapse. You can choose to cancel or save the changes you made, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#del-syn-btn",title:"Delete Synapse",content:"You can delete a synapse by first clicking the synapse you want to delete. You can choose to cancel or apply the deletion, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#clear-all-btn",title:"Clear All",content:"You can clear your workspace and delete all elements by clicking this button. You can choose to cancel or apply the deletion, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".__________cytoscape_container",title:"The Workspace",content:"After adding a neuron, you will be able to see a visual representation here.  Inside each neuron, you will find the number of spikes the neuron has at the top, and its rules at the center. Below the neuron, you will find the current delay timer before the neuron spikes. By default, this is set to 0 and a neuron is set to spike at -1. ",placement:"bottom-start",offset:-400,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".__________cytoscape_container",title:"Creating Edges",content:"To create s or edges,  hover over the source node or neuron then a grey circle will appear and you can drag that to see a directed arrow that you can connect to your desired next node or neuron. ",placement:"bottom-start",offset:-400,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".snapse-controls",title:"Starting the Simulation",content:"Now it's time for simulations! You can simulate the system one step at a time by using the forward button. You can use the backward button to revert the system to the previous timestep.",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".snapse-controls",title:"Starting the Simulation",content:"You can also simulate the system continuously by clicking the play button. It will then proceed to go step-by-step at default 3 second intervals until the simulation is paused or the system halts.",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#speed-slider",title:"Simulation Speed Slider",content:"You can change the speed of the continuous simulation through this slider. Drag the slider thumb to the left to slow the simulation down. Drag it to the right to speed the simulation up. Click 'Reset to 1x' to reset to default speed (3 second intervals).",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#res-btn",title:"Restart Simulation",content:"Click this button to restart your simulation from the top (timestep = 0).",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#formGridCheckbox",title:"Pseudorandom or Guided Mode",content:"If your system contains points of non-determinism, or rather, if a neuron can execute more than one rule at a time, you can choose to set the simulation to pseudorandom or guided mode. When using pseudorandom mode, the system chooses what rule to execute. When using guided mode, you will be prompted to choose which rule the neuron should follow for that timestep. ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#react-burger-menu-btn",title:"Menu Actions",content:"In this menu, you will find other actions such as saving/loading files, viewing the choice history and some sample systems.",placement:"right",offset:390,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#custom-file",title:"Loading Files",content:"You can open pre-made or saved SNP Systems files in XML format.",offset:45,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#save-btn",title:"Saving Systems",content:"You can also save the current system you are working on. It will create an XML file.",offset:160,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#choice-history-btn",title:"Choice History",content:"Here you can view a table containing the rules each neuron applied per timestep.",offset:90,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#file-dropdown",title:"Download Samples",content:"Lastly, you can download some of the sample SN P systems prepared here to start you off!",offset:65,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},(Ke={target:".websnapse-title",title:"Get Started",content:"And that's the end of the tutorial! Enjoy creating and simulating your own SN P systems!",placement:"center",disableBeacon:!0},Object(v.a)(Ke,"disableBeacon",!0),Object(v.a)(Ke,"floaterProps",{disableAnimation:!0}),Ke)],Qe={key:new Date,run:!1,continuous:!0,loading:!1,stepIndex:0,steps:Ze},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START":return Object(h.a)(Object(h.a)({},e),{},{run:!0});case"RESET":return Object(h.a)(Object(h.a)({},e),{},{stepIndex:0});case"STOP":return Object(h.a)(Object(h.a)({},e),{},{run:!1});case"NEXT_OR_PREV":return Object(h.a)(Object(h.a)({},e),t.payload);case"RESTART":return Object(h.a)(Object(h.a)({},e),{},{stepIndex:0,run:!0,loading:!1,key:new Date});default:return e}},tt={beaconInner:{backgroundColor:"#786fa6"},tooltip:{backgroundColor:"#fff",textColor:"#333",fontSize:14},tooltipContainer:{textAlign:"center"},tooltipTitle:{fontSize:17,margin:"0 0 0 0"},buttonNext:{backgroundColor:"#786fa6"},buttonBack:{color:"#786fa6"},buttonSkip:{color:"#786fa6"},overlay:{backgroundColor:"rgba(0,0,0, 0.7)",mixBlendMode:"multiply"},spotlightLegacy:{boxShadow:"0 0 10 5 rgba(0,0,0, 0.5), 0 0 15px rgba(0, 0, 0, 0.3)"},floater:{arrow:{color:"#fff"},tooltip:{zIndex:100}}},nt=function(e){var t=e.handleShowSideBarMenu,n=e.handleCloseSideBarMenu,a=e.restartTutorial,s=e.handleFalseRestartTutorial,r=Object(o.useReducer)(et,Qe),i=Object(p.a)(r,2),c=i[0],l=i[1];Object(o.useEffect)((function(){localStorage.getItem("tour")||l({type:"START"})}),[]);return Object(o.useEffect)((function(){1==a&&l({type:"RESTART"})}),[a]),Object(z.jsx)(z.Fragment,{children:Object(z.jsx)($e.d,Object(h.a)(Object(h.a)({},c),{},{callback:function(e){var a=e.action,o=e.index,r=e.type,i=e.status;a===$e.a.CLOSE||i===$e.c.SKIPPED&&c.run||i===$e.c.FINISHED?l({type:"STOP"}):r===$e.b.STEP_AFTER||r===$e.b.TARGET_NOT_FOUND?l({type:"NEXT_OR_PREV",payload:{stepIndex:o+(a===$e.a.PREV?-1:1)}}):0===o?n():1===o?s():1===o&&a===$e.a.PREV||7===o||(18===o?t():23===o&&(n(),localStorage.setItem("tour","1")))},scrollToFirstStep:!0,showSkipButton:!0,hideBackButton:!1,showProgress:!0,continuous:!0,styles:tt,locale:{last:"End tour",skip:"Skip tour"}}))})},at=n(158),ot=n(277),st=n(278),rt=n(138),it=n.n(rt),ct=n(159),lt=(n(231),{compact:!0,ignoreComment:!0,spaces:4,sanitize:!1});var dt=function(e){var t=Object(o.useState)(""),n=Object(p.a)(t,2),a=n[0],s=n[1];return Object(z.jsx)(at.slide,{id:"side-bar-menu",isOpen:e.showSideBarMenu,onClick:function(){e.setShowSideBarMenu(!e.showSideBarMenu)},disableCloseOnEsc:!0,disableOverlayClick:!0,noOverlay:!0,children:Object(z.jsxs)("center",{children:[Object(z.jsx)(X.a,{className:"menuform",children:Object(z.jsx)(X.a.File,{id:"custom-file",label:a||"Load file...",custom:!0,onChange:function(t){!function(n){var a=n.files[0];if(e.setHasEnded(!1),a.type&&-1===a.type.indexOf("text/xml"))e.showError("File is not a xml file");else{var o=new FileReader,r=function(){var e=Object(b.a)(u.a.mark((function e(n,a){var o,s,r,c,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o=Object.keys(a._parent),s=o.length,r=o[s-1],(c=a._parent[r]).length>0?(l=c,d=c.length-1,l[d]=n):a._parent[r]="out"==r?[n]:"bitstring"==r?n:i(n)}catch(t){}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();o.addEventListener("load",function(){var t=Object(b.a)(u.a.mark((function t(n){var o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={compact:!0,trim:!0,ignoreDeclaration:!0,ignoreInstruction:!0,ignoreAttributes:!0,ignoreComment:!0,ignoreCdata:!0,ignoreDoctype:!0,textFn:r},t.next=3,it.a.xml2js(n.target.result,o);case 3:return i=t.sent,t.next=6,e.setNeurons((function(e){return i.content}));case 6:return t.next=8,e.setNeurons((function(e){for(var t in e)e[t].bitstring,e[t].isOutput||e[t].out||(e[t].out=[])}));case 8:window.localStorage.setItem("originalNeurons",JSON.stringify(i.content)),s(a.name);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o.readAsText(a),e.setTime(0)}function i(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}}(t.target)}})}),Object(z.jsx)("div",{className:"btncontainer",children:Object(z.jsx)(c.b,{to:"#",id:"save-btn",variant:"primary",disabled:e.time>0,onClick:function(){var t={content:e.neurons},n=it.a.json2xml(t,lt),a=new Blob([n],{type:"text/xml;charset=utf-8"});Object(ct.saveAs)(a,Date().toString()+"-Neurons.xmp"),e.setPristine()},children:Object(z.jsxs)("div",{className:"btnMode",children:[Object(z.jsx)(ot.a,{})," Save"]})})}),Object(z.jsx)("div",{className:"btncontainer",children:Object(z.jsx)(c.b,{to:"#",id:"choice-history-btn",variant:"primary",onClick:e.handleShowChoiceHistoryModal,children:Object(z.jsxs)("div",{className:"btnMode",children:[Object(z.jsx)(st.a,{})," Choice History"]})})}),Object(z.jsx)("div",{children:Object(z.jsxs)(Re.a,{id:"file-dropdown",title:"Download samples",children:[Object(z.jsx)(Te.a.Item,{href:"./samples/ex1 - 3k+3 spiker.xmp",download:!0,children:"Ex1 - 3k+3 Spiker"}),Object(z.jsx)(Te.a.Item,{href:"./samples/ex2 - bitadder.xmp",download:!0,children:"Ex2 - Bitadder"}),Object(z.jsx)(Te.a.Item,{href:"./samples/ex3 - increasing comparator.xmp",download:!0,children:"Ex3 - Increasing Comparator"}),Object(z.jsx)(Te.a.Item,{href:"./samples/ex4 - naturally even.xmp",download:!0,children:"Ex4 - Naturally Even"}),Object(z.jsx)(Te.a.Item,{href:"./samples/ex5 - naturally greater one.xmp",download:!0,children:"Ex5 - Naturally Greater Than One"})]})}),Object(z.jsx)("div",{className:"btncontainer",children:Object(z.jsx)(c.b,{to:"#",id:"restart-tour",variant:"primary",onClick:e.handleTrueRestartTutorial,children:Object(z.jsx)("div",{className:"btnMode",children:"Restart Tutorial"})})}),Object(z.jsx)("a",{href:"http://snapse.website",children:Object(z.jsx)("div",{className:"btncontainer",children:Object(z.jsx)("div",{className:"btnMode",children:"Return to Main Menu"})})}),Object(z.jsx)("div",{children:Object(z.jsx)(X.a,{children:Object(z.jsx)(X.a.Check,{type:"checkbox",label:"Display details when hovering",defaultChecked:e.isHover,onChange:function(){e.isHover=!e.isHover}})})})]})})},ut=!1,bt=!0,ht="",jt="";function pt(e,t){var n=Object(o.useRef)(!1),a=Object(o.useRef)(t),s=document.getElementsByTagName("input");Object(o.useEffect)((function(){var e,t=Object(O.a)(s);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.addEventListener("focusin",(function(){n.current=!0,console.log("fOCUS ON ME")})),a.addEventListener("input",(function(){n.current=!0,console.log("fOCUS ON ME 2")})),a.addEventListener("focus",(function(){n.current=!0,console.log("fOCUS ON ME 3")}),!0),a.addEventListener("focusout",(function(){n.current=!1}))}}catch(o){t.e(o)}finally{t.f()}})),Object(o.useEffect)((function(){a.current=t})),Object(o.useEffect)((function(){function t(t){console.log("isFocus ".concat(n.current)),t.code===e&&0==n.current&&(console.log("handleKeyDown isFocus: ".concat(n.current)),console.log("Key pressed: "+t.code),a.current(t))}return document.addEventListener("keydown",(function(e){"Space"===e.code&&0==n&&e.preventDefault()})),document.addEventListener("keydown",function(e,t){var n;return function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,o),n=null}),e)}}(300,t)),function(){return document.removeEventListener("keydown",t)}}),[e])}var Ot=function(){var e=Object(f.a)(null!=window.localStorage.getItem("originalNeurons")?JSON.parse(window.localStorage.getItem("originalNeurons")):{n1:{id:"n1",position:{x:50,y:50},rules:"a+/a->a;2",startingSpikes:1,delay:0,spikes:1,isOutput:!1,isInput:!1,out:["n2"],outWeights:{n2:1}},n2:{id:"n2",position:{x:200,y:50},rules:"a/a->a;1",startingSpikes:0,delay:0,spikes:0,isOutput:!1,isInput:!1,out:["n3"],outWeights:{n3:1}},n3:{id:"n3",position:{x:400,y:50},rules:"a/a->a;0",startingSpikes:1,delay:0,spikes:1,isOutput:!1,isInput:!1,out:["n4"],outWeights:{n4:1}},n4:{id:"n4",position:{x:400,y:200},isOutput:!0,isInput:!1,spikes:0,bitstring:" "}}),t=Object(p.a)(e,2),n=t[0],a=t[1],s=Object(o.useState)(""),r=Object(p.a)(s,2),i=r[0],c=r[1],l=Object(o.useState)(""),d=Object(p.a)(l,2),O=d[0],x=d[1],y=Object(o.useState)(0),v=Object(p.a)(y,2),S=v[0],w=v[1],N=Object(o.useState)(""),k=Object(p.a)(N,2),C=k[0],E=(k[1],Object(o.useState)("")),I=Object(p.a)(E,2),D=I[0],R=(I[1],Object(o.useState)("")),T=Object(p.a)(R,2),M=T[0],B=(T[1],Object(o.useState)("")),_=Object(p.a)(B,2),L=_[0],W=(_[1],Object(o.useState)("")),J=Object(p.a)(W,2),G=J[0],F=(J[1],Object(o.useState)("")),Y=Object(p.a)(F,2),q=Y[0],V=(Y[1],Object(o.useState)(1)),X=Object(p.a)(V,2),Z=X[0],Q=X[1],ee=Object(o.useState)(!0),te=Object(p.a)(ee,2),ne=te[0],ae=te[1],oe=ke(),se=Object(p.a)(oe,3),ie=se[0],ce=se[1],de=se[2],ue=Object(o.useState)(!1),he=Object(p.a)(ue,2),je=he[0],ve=he[1],Se=Object(o.useState)(!1),we=Object(p.a)(Se,2),Ce=we[0],Ee=we[1],Ie=Object(o.useState)(!1),De=Object(p.a)(Ie,2),Re=De[0],Te=De[1],Me=Object(o.useState)(!1),Be=Object(p.a)(Me,2),Ae=Be[0],_e=Be[1],Pe=Object(o.useState)(!1),He=Object(p.a)(Pe,2),Le=He[0],We=He[1],Je=Object(o.useState)(!1),Ge=Object(p.a)(Je,2),Fe=Ge[0],qe=Ge[1],ze=Object(o.useState)(!1),Ue=Object(p.a)(ze,2),Ve=Ue[0],Ke=Ue[1],$e=Object(o.useState)(!1),Ze=Object(p.a)($e,2),Qe=Ze[0],et=Ze[1],tt=Object(o.useState)(!1),at=Object(p.a)(tt,2),ot=at[0],st=at[1],rt=Object(o.useState)(!1),it=Object(p.a)(rt,2),ct=it[0],lt=it[1],Ot=Object(o.useState)(!1),ft=Object(p.a)(Ot,2),gt=ft[0],mt=ft[1],xt=Object(o.useState)(!1),yt=Object(p.a)(xt,2),vt=yt[0],St=yt[1],wt=Object(o.useState)(!1),Nt=Object(p.a)(wt,2),kt=Nt[0],Ct=Nt[1],Et=Object(o.useState)(!1),It=Object(p.a)(Et,2),Dt=It[0],Rt=It[1],Tt=Object(o.useState)(!1),Mt=Object(p.a)(Tt,2),Bt=Mt[0],At=Mt[1],_t=Object(o.useState)(!1),Pt=Object(p.a)(_t,2),Ht=Pt[0],Lt=Pt[1],Wt=Object(o.useState)(""),Jt=Object(p.a)(Wt,2),Gt=Jt[0],Ft=Jt[1],Yt=Object(o.useState)(0),qt=Object(p.a)(Yt,2),zt=qt[0],Ut=qt[1],Vt=Object(o.useState)(1),Kt=Object(p.a)(Vt,2),Xt=Kt[0],$t=Kt[1],Zt=function(){return mt(!0)},Qt=function(){return qe(!1)},en=Object(o.useState)("PSEUDORANDOM"),tn=Object(p.a)(en,2),nn=tn[0],an=tn[1],on=Object(o.useState)(!1),sn=Object(p.a)(on,2),rn=sn[0],cn=sn[1],ln=function(){Lt(!0),At(!1),console.log("alert from simulationEnd"),alert("Simulation has ended.")},dn=function(e){Ft(e),setTimeout((function(){Ft("")}),3e3)},un=function(e,t){c(e),x(t),console.log("newEdge",e,t),a((function(n){var a=Object(j.a)(n[e].out),o=Object(h.a)({},n[e].outWeights),s=parseInt(o[t]);a.includes(t)?pn(e,t,s+1,1):Ee(!0)})),ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))))};function bn(){return(bn=Object(b.a)(u.a.mark((function e(t,o,s){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){console.log("NEW WEIGHT",s);var n=Object(h.a)({},e[t].outWeights);n[o]=s,e[t].outWeights=n}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(e,t){return jn.apply(this,arguments)}function jn(){return(jn=Object(b.a)(u.a.mark((function e(t,o){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){Object(j.a)(e[t].out);var n=Object(h.a)({},e[t].outWeights);if(n[o]>1)e[t].outWeights[o]=n[o]-1;else{var a=e[t].out.filter((function(e){return e!==o}));e[t].out=a,delete e[t].outWeights[o]}var s=Object(j.a)(e[t].out);console.log("NEW OUT DETAILS ",s);var r=Object(h.a)({},e[t].outWeights);console.log("WEIGHTS DETAILS",r),console.log("DELETED SYNAPSE")}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pn(e,t,n,a){return On.apply(this,arguments)}function On(){return(On=Object(b.a)(u.a.mark((function e(t,o,s,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){var n=Object(h.a)({},e[t].outWeights);if(n[o]=s,e[t].outWeights=n,console.log("WEIGHTS",n),0==r){console.log("FLAG IS ZERO");var a=Object(j.a)(e[t].out);a.push(o),e[t].out=a}}));case 2:c(""),x(""),ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fn=function(){var e=Object(b.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a((function(e){e[n].position=t})),ce(!0),_n();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function gn(){return(gn=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t.id]=t}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mn(){return(mn=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t.id]=t}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(){return(xn=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t.id]=t}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(){return(yn=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zt();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(){return(vn=Object(b.a)(u.a.mark((function e(t,o,s){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t].startingSpikes=s,e[t].spikes=s,e[t].rules=o}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(){return(Sn=Object(b.a)(u.a.mark((function e(t,o){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t].bitstring=o}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wn(){return(wn=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDeleteNode",t),e.next=3,a((function(e){for(var n in e){var a=e[n];if(!a.isOutput&&a.out){var o=a.out.filter((function(e){return e!==t}));e[n].out=o}}delete e[t]}));case 3:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(){return(Nn=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a((function(e){for(var t in e)delete e[t]})),ce(!0),console.log("ALL DELETED",n),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),_n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kn=function(){if(0!=S){var e=JSON.parse(window.localStorage.getItem("originalNeurons"));for(var t in e){var n=e[t];n.isOutput||n.isInput||(delete e[n.id].chosenRule,delete e[n.id].currentRule)}window.localStorage.setItem("originalNeurons",JSON.stringify(e)),a((function(e){return JSON.parse(window.localStorage.getItem("originalNeurons"))})),w(0),At(!1),Lt(!1);var o=window.localStorage.getItem("originalNeurons");window.localStorage.clear(),window.localStorage.setItem("originalNeurons",o)}},Cn=Object(o.useState)({}),En=Object(p.a)(Cn,2),In=En[0],Dn=En[1],Rn=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(t);case 2:qe(!0),qe&&At(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tn=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==S&&(console.log("FORWARD"),console.log("Time is: "+S),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),window.localStorage.setItem("shouldTimeStep","1"),console.log("Original neurons on time = 1 ",window.localStorage.getItem("originalNeurons"))),Ht){e.next=9;break}return console.log("Time is: "+S),e.next=5,a((function(e){return P(e,S,ne,Rn,ln)}));case 5:"1"==window.localStorage.getItem("shouldTimeStep")&&w((function(e){return e+1})),console.log("Local storage space used: ".concat(2*JSON.stringify(localStorage).length)),e.next=10;break;case 9:alert("Simulation has ended.");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mn=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(S>1)){e.next=9;break}return t=S.valueOf(),Lt(!1),e.next=5,a((function(e){return H(t-2)}));case 5:return e.next=7,w((function(e){return e-1}));case 7:e.next=10;break;case 9:1==S&&kn();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useRef)(n).current=n;var Bn=Object(o.useRef)(Tn);function An(){ut?hn(ht,jt):console.log("No edge clicked."),console.log("Delete/Bspace Pressed")}function _n(){document.getElementById("forwardBtn").click()}return Bn.current=function(){Tn(),Ut((function(e){return e+1}))},Object(o.useEffect)((function(){Fe&&console.log("showChooseRuleModal is true")}),[]),pt("Space",(function(){console.log("Space Pressed"),At((function(e){return!e}))})),pt("ArrowLeft",(function(){console.log("Left Key Pressed"),Mn()})),pt("ArrowRight",(function(){console.log("Right Key Pressed"),Ht||Bn.current()})),pt("Delete",An),pt("Backspace",An),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(nt,{handleShowSideBarMenu:function(){return Rt(!0)},handleCloseSideBarMenu:function(){return Rt(!1)},restartTutorial:rn,handleFalseRestartTutorial:function(){return cn(!1)}}),Gt&&Object(z.jsx)(g.a,{variant:"danger",children:Gt}),Object(z.jsx)(dt,{showSideBarMenu:Dt,setShowSideBarMenu:Rt,hasEnded:Ht,setHasEnded:Lt,showError:dn,neurons:n,setNeurons:a,time:S,setTime:w,isHover:bt,setPristine:de,handleShowChoiceHistoryModal:function(){lt(!0),Rt(!1)},handleTrueRestartTutorial:function(){return cn(!0)}}),Object(z.jsxs)(m.a,{children:[Object(z.jsx)(Ye,{setMode:an,mode:nn,setIsRandom:ae,time:S,setTime:w,onBackward:Mn,onForward:Tn,pBar:zt,isPlaying:Bt,setIsPlaying:At,hasEnded:Ht,neurons:n,onIntervalStepRef:Bn,sld_value:Xt,setSldValue:$t}),Object(z.jsx)(Xe,{handleShow:function(){return Te(!0)},handleShowNewInputModal:function(){return We(!0)},handleShowNewOutputModal:function(){return _e(!0)},handleShowDeleteModal:function(){return St(!0)},handleShowEditModal:function(){return Ke(!0)},handleShowEditInputModal:function(){return et(!0)},handleReset:kn}),Object(z.jsx)("hr",{}),Object(z.jsx)(U,{neurons:n,onEdgeCreate:function(e,t,n){un(e.id(),t.id()),n.remove()},handleChangePosition:fn,handleDeleteSynapse:hn,setIsClickedSynapse:function(e,t,n){var o;ht=t,jt=n,(ut=e)&&(a((function(e){var a=Object(h.a)({},e[t].outWeights);o=parseInt(a[n])})),Q(o))},handleShowDeleteAll:function(){return yn.apply(this,arguments)},headless:!1,setNeurons:a,splitRules:function(e){for(var t=/([0-9]*)a\(*([0-9]*)(a*)\)*(\+?|\*?)\/([0-9]*)a->([0-9]*)a;([0-9]+)/,n=/([0-9]*)a\(*([0-9]*)(a*)\)*(\+?|\*?)\/([0-9]*)a->(0);(0)/,a=[],o=[],s=e.split(" "),r=0;r<s.length;r++){var i=t.exec(s[r]),c=n.exec(s[r]);i?a.push(s[r]):c&&o.push(s[r])}return[a,o]},checkIsHover:function(){return console.log("isHover is",bt),bt},handleShowEditSynapseModal:function(){return st(!0)},handleShowDeleteSynapseModal:function(){console.log("SHOW DELSYN"),Ct(!0)},time:S}),Object(z.jsx)(Ne,{time:S,showChoiceHistoryModal:ct,handleCloseHoiceHistoryModal:function(){return lt(!1)}}),Object(z.jsx)(K,{showElementPopup:je,handleCloseElementPopup:function(){return ve(!1)},handleError:dn,nodeID:C,nodeType:D,nodeSRules:M,nodeFRules:L,nodeSpikes:G,nodeBitstring:q}),Object(z.jsx)(le,{showAddWeightModal:Ce,handleCloseAddWeightModal:function(){return Ee(!1)},handleAddWeight:pn,handleError:dn,srce:i,dest:O}),Object(z.jsx)(re,{showNewNodeModal:Re,handleCloseModal:function(){return Te(!1)},handleNewNode:function(e){return gn.apply(this,arguments)},handleError:dn}),Object(z.jsx)(be,{showNewOutputModal:Ae,handleCloseNewOutputModal:function(){return _e(!1)},handleNewOutput:function(e){return mn.apply(this,arguments)},handleError:dn}),Object(z.jsx)(pe,{showNewInputModal:Le,handleCloseNewInputModal:function(){return We(!1)},handleNewInput:function(e){return xn.apply(this,arguments)},handleError:dn}),Object(z.jsx)(Oe,{showEditModal:Ve,handleCloseEditModal:function(){return Ke(!1)},handleEditNode:function(e,t,n){return vn.apply(this,arguments)},handleError:dn,neurons:n}),Object(z.jsx)(fe,{showEditInputModal:Qe,handleCloseEditInputModal:function(){return et(!1)},handleEditInputNode:function(e,t){return Sn.apply(this,arguments)},handleError:dn,neurons:n}),Object(z.jsx)(ge,{showEditSynapseModal:ot,handleCloseEditSynapseModal:function(){return st(!1)},handleEditSynapse:function(e,t,n){return bn.apply(this,arguments)},handleError:dn,neurons:n,isClickedSynapse:ut,srcID:ht,dstID:jt,setWeight:Q,weight_main:Z,setNeurons:a,handleDeleteSynapse:hn}),Object(z.jsx)(xe,{showDeleteAllModal:gt,handleCloseDeleteAllModal:function(){return mt(!1)},handleDeleteAll:function(){return Nn.apply(this,arguments)},handleError:dn}),Object(z.jsx)(me,{showDeleteModal:vt,handleCloseDeleteModal:function(){return St(!1)},handleDeleteNode:function(e){return wn.apply(this,arguments)},handleError:dn,neurons:n}),Object(z.jsx)(ye,{showDeleteSynapseModal:kt,handleCloseDeleteSynapseModal:function(){return Ct(!1)},handleDeleteSynapse:hn,handleError:dn,setNeurons:a,isClickedSynapse:ut,srcID:ht,dstID:jt}),Object(z.jsx)($,{showChooseRuleModal:Fe,handleCloseChooseRuleModal:Qt,rules:In,handleChosenRules:function(e){Qt(),a((function(t){for(var n in t)for(var a in e)if(n==a){var o=A(e[a]),s=Object(p.a)(o,6),r=(s[0],s[1],s[2],s[3],s[4],s[5]);t[n].delay=r,t[n].currentRule=e[a],t[n].chosenRule=e[a]}}))}}),ie]})]})};var ft=function(){return Object(z.jsx)(c.a,{children:Object(z.jsx)(l.d,{children:Object(z.jsx)(l.b,{path:"/",children:Object(z.jsx)(Ot,{})})})})},gt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,285)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),s(e),r(e)}))},mt=n(160),xt=n.n(mt),yt=n(161),vt=n.n(yt),St=n(162),wt=n.n(St);n.p;k.a.use(vt.a),k.a.use(wt.a),k.a.use(xt.a),i.a.render(Object(z.jsx)(s.a.StrictMode,{children:Object(z.jsx)(ft,{})}),document.getElementById("root")),gt()}},[[245,1,2]]]);
//# sourceMappingURL=main.4cb10303.chunk.js.map